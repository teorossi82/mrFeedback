!function(){"use strict";function e(e,n){var a={restrict:"E",link:function(t,a,c){var i='<div class="mrFeedback" ng-class="mrFeedback.theme"><div class="box-feedback"><div class="box-left"><i class="fa fa-exclamation-triangle"></i></div><div class="box-content"><div class="box-header"><div class="title">{{mrFeedback.feedback.title}}</div><div class="button-close" ng-if="mrFeedback.feedback.close" ng-click="mrFeedback.close()"><i class="fa fa-times"></i></div></div><div class="box-body"><div class="box-header-body">{{mrFeedback.feedback.title}}</div>{{mrFeedback.feedback.msg}}</div><div class="buttons-feedback"><div class="box-btnAction" ng-if="mrFeedback.feedback.btnAction"><div ng-repeat="button in mrFeedback.feedback.btnAction" class="button-feedback" style="{{button.btnStyle}}" ng-click="mrFeedback.action($index)"><i ng-if="button.icon" class="fa {{button.icon}}"></i>{{button.text}}</div></div><div class="button-feedback button-close" ng-if="mrFeedback.feedback.close" ng-click="mrFeedback.close()">Close</div></div></div></div></div>',o=function(){var e=t.mrFeedback.feedback&&t.mrFeedback.feedback.template?t.mrFeedback.feedback.template:i;a.html(e).show(),n(a.contents())(t),d()},d=function(){function n(e){l=e.clientY-d,m=e.clientX-o,i(),f&&f(e)}function c(t){e.unbind("mousemove",n),e.unbind("mouseup",c),r&&r(t)}function i(){b&&(m<b.left?m=b.left:m>b.right-k&&(m=b.right-k),l<b.top?l=b.top:l>b.bottom-u&&(l=b.bottom-u)),h.css({top:l+"px",left:m+"px"})}var o,d,s,r,f,b,m=0,l=0,k=a[0].offsetWidth,u=a[0].offsetHeight;if(t.dragOptions){s=t.dragOptions.start,f=t.dragOptions.drag,r=t.dragOptions.stop;var v=t.dragOptions.container;v&&(b=document.getElementById(v).getBoundingClientRect())}var h=a.find(".mrFeedback"),p=a.find(".box-content .box-header");p.on("mousedown",function(t){t.preventDefault(),o=t.clientX-h[0].offsetLeft,d=t.clientY-h[0].offsetTop,e.on("mousemove",n),e.on("mouseup",c),s&&s(t)})};o()},scope:{feedback:"="},replace:!0,controller:t,controllerAs:"mrFeedback",bindToController:!0};return a}function t(e,t,n,a){var c=this,i=c.feedback&&c.feedback.animation?"animation-"+c.feedback.animation:"animation-fade";c.close=function(){if(c.feedback.fnClose){var e=c.feedback.fnClose.params;c.feedback.fnClose.func.apply(this,e)}d()},c.action=function(e){var t=c.feedback.btnAction[e].params;c.feedback.btnAction[e].func.apply(this,t),c.feedback.autoClose&&d()};var i=n.defaultAnimation,o=function(){i=c.feedback&&c.feedback.animation?"animation-"+c.feedback.animation:"animation-"+i,t.find(".mrFeedback").addClass("mrFeedback-show "+i),a(function(){t.find(".mrFeedback").addClass(i+"-show")},50)},d=function(){t.find(".mrFeedback").removeClass(i+"-show"),a(function(){t.find(".mrFeedback").removeClass("mrFeedback-show "+i),i=n.defaultAnimation,t.parent()[0].remove()},350)};e.$watch("mrFeedback.feedback",function(e,t){e?(o(),c.theme=c.feedback&&c.feedback.theme?c.feedback.theme:n.defaultTheme):d()}),e.$watch("mrFeedback.feedback.delete",function(e,t){e&&e===!0&&d()})}e.$inject=["$document","$compile"],t.$inject=["$scope","$element","mrFeedbackConfig","$timeout"],angular.module("mrFeedbackMdl",[]).provider("mrFeedbackConfig",function(){var e=[{os:"Windows",theme:"windows10"},{os:"Mac;",theme:"mac"},{os:"iPad;",theme:"ios"},{os:"iPhone;",theme:"ios"},{os:"Android",theme:"android"}],t=function(){for(var t="mac",n=0;n<e.length;n++)if(navigator.userAgent.indexOf(e[n].os)>-1)return t=e[n].theme;return t};this.defaultTheme=t(),this.defaultAnimation="fade",this.$get=function(){return this}}).provider("$uiMrFeedback",function(){this.$get=["$compile","$log","$timeout","$document","$rootScope",function(e,t,n,a,c){var i=c,o=i.$new(),d=0;return this.open=function(n){if(!n)return t.error("mrFeedback: An object with title and msg field is mandatory to create the box");$("body").append("<mr-feedback-content-"+d+" class='mrFeedbackContent'></mr-feedback-content>"),o["instancesFeedback_"+d]=n;var a=o["instancesFeedback_"+d];a.remove=function(){this["delete"]=!0};var c='<mr-feedback feedback="instancesFeedback_'+d+'"></mr-feedback>',i=$("mr-feedback-content-"+d).append(c);return e(i)(o),d++,a},this}]}).directive("mrFeedback",e)}();