!function(){"use strict";function e(e,t){return{restrict:"E",link:function(n,a,c){var o=function(){function t(e){k=e.clientY-d,m=e.clientX-i,o(),b&&b(e)}function c(n){e.unbind("mousemove",t),e.unbind("mouseup",c),f&&f(n)}function o(){r&&(m<r.left?m=r.left:m>r.right-l&&(m=r.right-l),k<r.top?k=r.top:k>r.bottom-u&&(k=r.bottom-u)),v.css({top:k+"px",left:m+"px"})}var i,d,s,f,b,r,m=0,k=0,l=a[0].offsetWidth,u=a[0].offsetHeight;if(n.dragOptions){s=n.dragOptions.start,b=n.dragOptions.drag,f=n.dragOptions.stop;var h=n.dragOptions.container;h&&(r=document.getElementById(h).getBoundingClientRect())}var v=a.find(".mrFeedback");a.find(".box-content .box-header").on("mousedown",function(n){n.preventDefault(),i=n.clientX-v[0].offsetLeft,d=n.clientY-v[0].offsetTop,e.on("mousemove",t),e.on("mouseup",c),s&&s(n)})};!function(){var e=n.mrFeedback.feedback&&n.mrFeedback.feedback.template?n.mrFeedback.feedback.template:'<div ng-if="mrFeedback.feedback.modal" class="mrFeedbackLayout"></div><div class="mrFeedback" ng-class="mrFeedback.theme"><div class="box-feedback {{mrFeedback.notificationType}} {{mrFeedback.feedback.customClass}}"><div class="box-left" ng-if="mrFeedback.showLeft"><i class="fa fa-exclamation-triangle" ng-if="mrFeedback.showPostItIcon"></i></div><div class="box-content" ng-class="{\'with-left-icon\':mrFeedback.showLeft}"><div class="box-header" ng-if="mrFeedback.showHeader"><div class="title">{{mrFeedback.feedback.title}}</div><div class="button-close" ng-if="mrFeedback.feedback.close" ng-click="mrFeedback.close()"><i class="fa fa-times"></i></div></div><div class="box-body"><div class="box-body-left" ng-if="mrFeedback.showBodyLeftIcon"><img ng-src="{{mrFeedback.feedback.icon.src}}" ng-if="mrFeedback.showBodyLeftIconImg"/><i class="body-icon {{mrFeedback.feedback.icon.class}}" ng-if="mrFeedback.showBodyLeftIconClass"></i></div><div class="box-body-right" ng-class="{\'with-left-icon\':mrFeedback.showBodyLeftIcon}"><div class="box-header-body">{{mrFeedback.feedback.title}}</div><div class="box-msg-body" ng-bind-html="mrFeedback.feedback.msg"></div></div></div><div class="buttons-feedback"><div class="box-btnAction" ng-if="mrFeedback.feedback.btnAction"><div ng-repeat="button in mrFeedback.feedback.btnAction" class="button-feedback" style="{{button.btnStyle}}" ng-click="mrFeedback.action($index)"><i ng-if="button.icon" class="fa {{button.icon}}"></i>{{button.text}}</div></div><div class="button-feedback button-close" ng-if="mrFeedback.feedback.close" ng-click="mrFeedback.close()">{{mrFeedback.feedback.closeText || "Close"}}</div></div></div></div></div>';a.html(e),t(a.contents())(n),o()}()},scope:{feedback:"="},replace:!0,controller:n,controllerAs:"mrFeedback",bindToController:!0}}function n(e,n,t,a){var c=this,o=function(){var e=c.feedback&&"notification"===c.feedback.theme?c.feedback.notificationDelay:null;e&&setTimeout(function(){c.close()},e),c.showLeft=!(!c.feedback||"post-it-alert"!==c.feedback.theme),c.showPostItIcon=c.feedback&&"post-it-alert"===c.feedback.theme,c.showBodyLeftIcon=c.feedback&&c.feedback.icon,c.showBodyLeftIconImg=c.showBodyLeftIcon&&"img"===c.feedback.icon.type,c.showBodyLeftIconClass=c.showBodyLeftIcon&&"class"===c.feedback.icon.type},i=c.feedback&&c.feedback.animation?"animation-"+c.feedback.animation:"animation-fade";c.notificationType=c.feedback&&"notification"===c.feedback.theme?c.feedback.notificationType||"":"";var d=function(){return!c.feedback||"notification"!==c.feedback.theme||!!c.feedback.close};c.showHeader=d(),c.close=function(){if(c.feedback.fnClose){var e=c.feedback.fnClose.params;c.feedback.fnClose.func.apply(this,e)}b()},c.action=function(e){var n=c.feedback.btnAction[e].params;c.feedback.btnAction[e].func.apply(this,n),c.feedback.autoClose&&b()};var i=t.defaultAnimation,s=function(){i=c.feedback&&c.feedback.animation?"animation-"+c.feedback.animation:"animation-"+i;var e=n.find(".mrFeedback").length>0?n.find(".mrFeedback"):n.contents(".mrFeedback");e.addClass("mrFeedback-show "+i),a(function(){e.addClass(i+"-show")},50)},f=function(){i="animation-none";var e=n.find(".mrFeedback").length>0?n.find(".mrFeedback"):n.contents(".mrFeedback");e.addClass("mrFeedback-show "+i),a(function(){e.addClass(i+"-show"),m()},50)},b=function(){var e=n.find(".mrFeedback").length>0?n.find(".mrFeedback"):n.contents(".mrFeedback");e.removeClass(i+"-show"),a(function(){e.removeClass("mrFeedback-show "+i),i=t.defaultAnimation,n.parent()[0].remove(),r()},350)},r=function(){var e=$("body").find("#mrFeedback-notContainer");e.html()||e.remove()},m=function(){var e=n.find(".mrFeedback").length>0?n.find(".mrFeedback"):n.contents(".mrFeedback"),t=angular.element(e).height(),a=(window.innerHeight-t)/2;angular.element(e).css("top",a+"px")};e.$watch("mrFeedback.feedback",function(e,n){e?(c.theme=c.feedback&&c.feedback.theme?c.feedback.theme:t.defaultTheme,c.feedback.modal?f():s()):b()}),e.$watch("mrFeedback.feedback.delete",function(e,n){e&&e===!0&&b()}),e.$watch("mrFeedback.feedback.close",function(e,n){e!==n&&(c.showHeader=d())}),o()}e.$inject=["$document","$compile"],n.$inject=["$scope","$element","mrFeedbackConfig","$timeout"],angular.module("mrFeedbackMdl",["ngSanitize"]).provider("mrFeedbackConfig",function(){var e=[{os:"Windows",theme:"windows10"},{os:"Mac;",theme:"mac"},{os:"iPad;",theme:"ios"},{os:"iPhone;",theme:"ios"},{os:"Android",theme:"android"}],n=function(){for(var n="mac",t=0;t<e.length;t++)if(navigator.userAgent.indexOf(e[t].os)>-1)return n=e[t].theme;return n};this.defaultTheme=n(),this.defaultAnimation="fade",this.$get=function(){return this}}).provider("$uiMrFeedback",function(){this.$get=["$compile","$log","$timeout","$document","$rootScope",function(e,n,t,a,c){var o=c,i=o.$new(),d=0;return this.open=function(t){if(!t)return n.error("mrFeedback: An object with title and msg field is mandatory to create the box");if(t.theme&&"notification"===t.theme){$("body").find("#mrFeedback-notContainer").length||$("body").append("<div id='mrFeedback-notContainer'></div>"),t.appendTo="#mrFeedback-notContainer"}var a=t.appendTo&&$(t.appendTo).length>0?t.appendTo:"body";$(a).append("<mr-feedback-content-"+d+" class='mrFeedbackContent'></mr-feedback-content>"),i["instancesFeedback_"+d]=t;var c=i["instancesFeedback_"+d];c.remove=function(){this.delete=!0};var o='<mr-feedback feedback="instancesFeedback_'+d+'"></mr-feedback>';return e($("mr-feedback-content-"+d).append(o))(i),d++,c},this}]}).directive("mrFeedback",e)}();